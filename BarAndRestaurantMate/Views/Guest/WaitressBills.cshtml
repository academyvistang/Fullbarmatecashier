@model BarAndRestaurantMate.Models.HotelMenuModel

@{
    ViewBag.Title = "Booking";
}

@section scripts
{
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    @*<script src="~/Scripts/jquery.signalR-2.0.3.min.js"></script>*@
    <!--Reference the autogenerated SignalR hub script. -->
    @*<script src="~/signalr/hubs"></script>*@
    <!--SignalR script to update the chat page and send messages.-->
    @*<script src="~/Scripts/callerconnection.js"></script>*@


    <script>
       $(function ()
       {
           $("#WaitressProcessBillDelete").click(function ()
           {
               var r = confirm("You have indicated that you want to delete this entire bill. Please confirm.!");
               return r;
           });

           $(".ItemRemoveOrder").click(function ()
           {
               var id = $(this).parent().parent().attr("Id");

               var guestOrderId = $("#GuestOrderId").val();

               $(this).parent().parent().remove();

               //itemId, int? quantity
               $.ajax({
                   url: "@Url.Action("RemoveFromGuestRequestBill", "Guest")",
                   data: { id: id },
                   dataType: "json",
               type: "POST",
               error: function ()
               {
                   alert("An error occurred.");
               },
               success: function (data)
               {

                   var strRow = '<tr style="color:red;"><td></td><td colspan="2">Total</td><td>' + data.total + '</td></tr>';

                   var tab = "#CustomerItemsTableBill_" + guestOrderId + " tr:last";

                   $(tab).remove();

                   $(tab).after(strRow);


               }

               });

          });
    });

    </script>



}

@Html.Hidden("GROUP", "WAITRESS")

@Html.Hidden("PERSONNAME", @User.Identity.Name)

@Html.Partial("_ViewAllMyBills")





